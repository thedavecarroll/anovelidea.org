{{ define "main" }}
<article class="list-page">
  <header class="page-header">
    <h1 class="page-title">{{ .Title }}</h1>
    {{ with .Description }}
    <p class="page-description">{{ . }}</p>
    {{ end }}
  </header>

  {{ with .Content }}
  <div class="page-content section-intro">
    {{ . }}
  </div>
  {{ end }}

  {{ $pages := .Pages }}
  {{ if .IsSection }}
    {{ $pages = .Pages.ByWeight }}
  {{ end }}

  <ul class="content-list">
    {{ range $pages }}
    <li class="content-item">
      <h2 class="item-title">
        <a href="{{ .Permalink }}">{{ .Title }}</a>
      </h2>
      {{ with .Params.subtitle }}
      <p class="item-subtitle">{{ . }}</p>
      {{ end }}
      {{ with .Description }}
      <p class="item-description">{{ . }}</p>
      {{ else }}
      {{ with .Summary }}
      <p class="item-description">{{ . | plainify | truncate 200 }}</p>
      {{ end }}
      {{ end }}
      <div class="item-meta">
        {{ with .Date }}
        <time datetime="{{ .Format "2006-01-02" }}">{{ .Format "January 2, 2006" }}</time>
        {{ end }}
        {{ if .Params.readingTime }}
        <span class="reading-time">{{ .ReadingTime }} min read</span>
        {{ end }}
      </div>
    </li>
    {{ end }}
  </ul>

  {{ template "_internal/pagination.html" . }}
</article>
{{ end }}
