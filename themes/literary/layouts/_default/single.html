{{ define "main" }}
<article class="single-page literary-content">
  <header class="article-header">
    {{ if .Section }}
    <div class="section-indicator">
      <a href="{{ .Section | relURL }}">{{ .Section | humanize | title }}</a>
    </div>
    {{ end }}
    <h1 class="article-title">{{ .Title }}</h1>
    {{ with .Params.subtitle }}
    <p class="article-subtitle">{{ . }}</p>
    {{ end }}
    {{ with .Params.author }}
    <p class="article-author">by {{ . }}</p>
    {{ end }}
  </header>

  {{ if .Params.toc }}
  <nav class="table-of-contents" aria-label="Table of contents">
    <h2>Contents</h2>
    {{ .TableOfContents }}
  </nav>
  {{ end }}

  <div class="article-content prose">
    {{ .Content }}
  </div>

  {{ if .Section }}
  <nav class="chapter-nav" aria-label="Chapter navigation">
    <div class="nav-prev-wrap">
      {{ with .PrevInSection }}
      <a href="{{ .Permalink }}" class="nav-prev">
        <span class="nav-label">Previous</span>
        <span class="nav-title">{{ .Title }}</span>
      </a>
      {{ end }}
    </div>
    <div class="nav-section-wrap">
      <a href="{{ .Section | relURL }}" class="nav-section">
        <span class="nav-label">Back to</span>
        <span class="nav-title">{{ .Section | humanize | title }}</span>
      </a>
    </div>
    <div class="nav-next-wrap">
      {{ with .NextInSection }}
      <a href="{{ .Permalink }}" class="nav-next">
        <span class="nav-label">Next</span>
        <span class="nav-title">{{ .Title }}</span>
      </a>
      {{ end }}
    </div>
  </nav>
  {{ end }}
</article>
{{ end }}
